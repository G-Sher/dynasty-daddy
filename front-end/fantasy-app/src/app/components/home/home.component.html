<div class="center-text margin-top-10 large-bold-header-text">Welcome to the website!</div>

<div class="flex-start-container margin-top-50">
  <div class="flex-item-home grid-75 center-text margin-top-25">
    <div class="mid-bold-text">Let's get started!</div>
    <br>
    <mat-form-field class="mat-dropdown-wide-200">
      <mat-label>Sleeper Username</mat-label>
      <input matInput type="text" [(ngModel)]="userName">
      <button mat-button *ngIf="userName" matSuffix mat-icon-button aria-label="Clear" (click)="userName=''">
        <mat-icon>close</mat-icon>
      </button>
    </mat-form-field>
    <div>
      <mat-form-field appearance="standard">
        <mat-label>Select a year</mat-label>
        <mat-select [(ngModel)]="selectedYear">
          <mat-option *ngFor="let year of supportedYears" [value]="year">{{year}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div>
      <button mat-raised-button [disabled]="!userName || (userName == sleeperService.sleeperUser?.userData?.username && selectedYear == sleeperService.selectedYear)"
              color="primary" (click)="fetchSleeperInfo()">Sign In
      </button>
    </div>
    <div class="margin-top-25" *ngIf="sleeperService.sleeperUser">
      <div>Hello <span class="warning__alert">{{sleeperService.sleeperUser.userData.username}}</span>! We found <span
        class="warning__alert">{{sleeperService.sleeperUser.leagues.length}}</span> leagues linked to this account in <span class="warning__alert">{{sleeperService.selectedYear}}</span>!</div>
      <br>
      <mat-form-field appearance="standard" *ngIf="sleeperService.sleeperUser.leagues.length > 0">
        <mat-label>Select a league</mat-label>
        <mat-select [(ngModel)]="selectedLeague" (selectionChange)="loadLeague($event.value)">
          <mat-option *ngFor="let league of sleeperService.sleeperUser.leagues"
                      [value]="league">{{league.name}}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="margin-top-25" *ngIf="sleeperService.sleeperTeamDetails && sleeperService.sleeperTeamDetails.length > 0">
      Congratulations <span class="warning__alert">{{sleeperService.sleeperUser.userData.username}}</span>! <span
      class="warning__alert">{{selectedLeague.name}}</span> was loaded successfully!
    </div>

  </div>

  <div class="grid-25 flex-item-home">
    <div class="community-box center-text">
      <div class="mid-bold-text margin-top-10">Join Our Community</div>
      <br>
      <iframe src="https://discord.com/widget?id=837372928005767220&theme=dark" width="350" height="500"
              allowtransparency="true" frameborder="0"
              sandbox="allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts" class="discord-widget"></iframe>
    </div>
  </div>
</div>

